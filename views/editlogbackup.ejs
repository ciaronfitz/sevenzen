<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SEVENZEN</title>
    <link rel="icon" href="/sevenzen.ico" sizes="any" type="image/svg+xml">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="/mystyles.css">
</head>

<body>
    <%- include('header'); %>
        <% for (let row of details) { %>
            <% var emoid=row.emotion_log_id; %>
                <% var emointensity=row.emotion_intensity; %>
                    <% var triggers=triggers; %>
                        <% var user_notes=row.user_notes; %>
                            <% var logdate=row.time_stamp; %>
                                <% var inputdate=new Date(logdate); %>
                                    <% const year=inputdate.getFullYear(); %>
                                        <% const month=(inputdate.getMonth() + 1).toString().padStart(2, "0" ); %>
                                            <% const day=inputdate.getDate().toString().padStart(2, "0" ); %>
                                                <% var formattedDate=`${year}-${month}-${day}` ; %>
                                                    <% } %>
                                                        <script
                                                            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
                                                            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
                                                            crossorigin="anonymous"></script>
                                                        <main class="main">
                                                            <div class="container-fluid pb-3">
                                                                <form method="post" action="/edit/<%=emoid%>">
                                                                    <div
                                                                        class="form-exampleFormControlSelect2  ml-3 mr-3 pt-3  pb-3">
                                                                        <label for="trigger">What has triggered
                                                                            this? (You can choose more than one
                                                                            trigger)</label>
                                                                        <% selecttriggers.forEach((row)=> { %>
                                                                            <div class="form-check">
                                                                                <input class="form-check-input"
                                                                                    id="trigger" name="trigger"
                                                                                    value="<%= row.emotrigger_name %>"
                                                                                    type="checkbox"
                                                                                    <%=triggers.includes(row.emotrigger_name)
                                                                                    ? 'checked' : '' %>>
                                                                                <label class="form-check-label"
                                                                                    for="trigger">
                                                                                    <%= row.emotrigger_name %>
                                                                                </label>
                                                                            </div>
                                                                            <% }); %>
                                                                    </div>

                                                                    <div>
                                                                        <label for="customRange2"
                                                                            class="form-label ml-3 mr-3 pt-3 pb-3">How
                                                                            intense
                                                                            is the emotion?</label>
                                                                        <input type="range" name="emointensity"
                                                                            class="range" min="1" max="10" step="1"
                                                                            id="customRange2" value=<%=emointensity%>>
                                                                    </div>
                                                                    <div class="form-group  ml-3 mr-3 pt-3 pb-3">
                                                                        <label
                                                                            for="exampleFormControlTextarea1">Personal
                                                                            Notes</label>
                                                                        <textarea class="form-control" name="usernotes"
                                                                            id="exampleFormControlTextarea1" rows="3"
                                                                            placeholder="<%=user_notes%>"></textarea>
                                                                        </textarea>
                                                                    </div>
                                                                    <button type="submit"
                                                                        class="btn btn-primary ml-3 mr-3 pt-3 pb-3">Submit</button>
                                                                </form>
                                                            </div>
                                                        </main>
                                                        </div>
                                                        </form>
                                                        </div>
                                                        </div>

</body>